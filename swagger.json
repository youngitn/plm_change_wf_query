{"openapi":"3.0.1","info":{"title":"PLM API","description":"API documentation for the Agile PLM project","version":"1.0"},"servers":[{"url":"http://10.4.0.53:8098","description":"Generated server url"}],"tags":[{"name":"範例控制器","description":"提供範例 API 操作"},{"name":"Agile PLM 控制器","description":"提供 Agile PLM 料號資訊查詢與管理 API"},{"name":"其他控制器","description":"提供範例 API 操作"}],"paths":{"/api/agile/parts/{partNumber}":{"get":{"tags":["Agile PLM 控制器"],"summary":"根據料號查詢料號資訊","description":"透過料號料號查詢完整的料號資訊","operationId":"getPartInfo","parameters":[{"name":"partNumber","in":"path","description":"料號料號","required":true,"schema":{"type":"string"},"example":"P00001"}],"responses":{"200":{"description":"成功取得料號資訊","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PartResponse"}}}},"404":{"description":"找不到指定的料號","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"伺服器錯誤","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}},"put":{"tags":["Agile PLM 控制器"],"summary":"更新料號資訊","description":"更新指定料號的描述資訊","operationId":"updatePart","parameters":[{"name":"partNumber","in":"path","description":"料號料號","required":true,"schema":{"type":"string"},"example":"P00001"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePartRequest"}}},"required":true},"responses":{"404":{"description":"找不到指定的料號","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"200":{"description":"成功更新料號資訊","content":{"application/json":{"schema":{"type":"string"}}}},"400":{"description":"請求參數無效","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"伺服器錯誤","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/other/item":{"post":{"tags":["其他控制器"],"summary":"建立一個新的項目","description":"建立一個新的範例項目並回傳其詳細資訊","operationId":"createItem","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExampleItem"}}},"required":true},"responses":{"400":{"description":"請求主體無效","content":{"application/json":{"schema":{"type":"string"}}}},"201":{"description":"成功建立項目","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExampleItem"}}}}}}},"/api/hr/history":{"post":{"tags":["hr-controller"],"operationId":"getEmployeeHistory","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmployeeHistoryRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmployeeHistoryProjection"}}}}}}}},"/api/example/item":{"post":{"tags":["範例控制器"],"summary":"建立一個新的項目","description":"建立一個新的範例項目並回傳其詳細資訊","operationId":"createItem_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExampleItem"}}},"required":true},"responses":{"400":{"description":"請求主體無效","content":{"application/json":{"schema":{"type":"string"}}}},"201":{"description":"成功建立項目","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExampleItem"}}}}}}},"/api/agile/users/inactive":{"post":{"tags":["Agile PLM 控制器"],"summary":"根據指定日期以後離職的Users,設置狀態為失效","description":"根據指定日期以後離職的Users設置Users狀態為失效","operationId":"setUsers","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmployeeHistoryRequest"}}},"required":true},"responses":{"200":{"description":"成功設置Users狀態為失效","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/agile/user":{"post":{"tags":["Agile PLM 控制器"],"summary":"根據userId 取得User info ","description":"根據userId 取得User info","operationId":"getUserInfo","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"成功取得User info","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/agile/user/inactive":{"post":{"tags":["Agile PLM 控制器"],"summary":"設置指定User帳號為失效","description":"設置指定User帳號為失效","operationId":"setUserInactive","parameters":[{"name":"username","in":"query","description":"User帳號","required":true,"schema":{"type":"string"},"example":"ytcheng"}],"responses":{"200":{"description":"成功將User設為失效狀態","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/agile/attachment":{"post":{"tags":["Agile PLM 控制器"],"summary":"下載附件","description":"(透過SDK,因效能不彰棄用)下載附件","operationId":"downloadAttachment","parameters":[{"name":"attachmentId","in":"query","description":"附件ID","required":true,"schema":{"type":"string"},"example":123},{"name":"fileName","in":"query","description":"附件名稱","required":true,"schema":{"type":"string"},"example":"123.ppt"}],"responses":{"200":{"description":"成功下載附件","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/api/agile/attachment/stream":{"post":{"tags":["Agile PLM 控制器"],"summary":"下載附件 (Stream)","description":"(透過SDK,因效能不彰棄用)使用串流方式下載附件，減少記憶體占用","operationId":"downloadAttachmentStream","parameters":[{"name":"attachmentId","in":"query","description":"附件ID","required":true,"schema":{"type":"string"},"example":123},{"name":"fileName","in":"query","description":"附件名稱","required":true,"schema":{"type":"string"},"example":"123.ppt"}],"responses":{"200":{"description":"成功下載附件","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/api/other/hello":{"get":{"tags":["其他控制器"],"summary":"取得問候訊息","description":"回傳一個簡單的問候訊息","operationId":"sayHello","responses":{"200":{"description":"成功取得問候訊息","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/other/greet":{"get":{"tags":["其他控制器"],"summary":"根據名稱取得問候訊息","description":"根據提供的名稱回傳個人化的問候訊息","operationId":"greetByName","parameters":[{"name":"name","in":"query","description":"要問候的名稱","required":true,"schema":{"type":"string","default":"World"},"example":"World"}],"responses":{"200":{"description":"成功取得個人化問候訊息","content":{"application/json":{"schema":{"type":"string"}}}},"400":{"description":"請求參數無效","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/example/hello":{"get":{"tags":["範例控制器"],"summary":"取得問候訊息","description":"回傳一個簡單的問候訊息","operationId":"sayHello_1","responses":{"200":{"description":"成功取得問候訊息","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/example/greet":{"get":{"tags":["範例控制器"],"summary":"根據名稱取得問候訊息","description":"根據提供的名稱回傳個人化的問候訊息","operationId":"greetByName_1","parameters":[{"name":"name","in":"query","description":"要問候的名稱","required":true,"schema":{"type":"string","default":"World"},"example":"World"}],"responses":{"200":{"description":"成功取得個人化問候訊息","content":{"application/json":{"schema":{"type":"string"}}}},"400":{"description":"請求參數無效","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/agile/ping":{"get":{"tags":["Agile PLM 控制器"],"summary":"測試 Agile 連線","description":"測試與 Agile PLM 系統的連線狀態","operationId":"ping","responses":{"200":{"description":"連線成功","content":{"application/json":{"schema":{"type":"string"}}}},"500":{"description":"連線失敗","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/agile/parts/{partNumber}/bom":{"get":{"tags":["Agile PLM 控制器"],"summary":"取得料號 BOM 結構","description":"查詢指定料號的 BOM 組成清單","operationId":"getPartBOM","parameters":[{"name":"partNumber","in":"path","description":"料號料號","required":true,"schema":{"type":"string"},"example":"P00001"}],"responses":{"404":{"description":"找不到指定的料號","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"伺服器錯誤","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"200":{"description":"成功取得 BOM 資訊","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/agile/parts/search":{"get":{"tags":["Agile PLM 控制器"],"summary":"搜尋料號列表","description":"根據關鍵字搜尋料號列表","operationId":"searchParts","parameters":[{"name":"keyword","in":"query","description":"搜尋關鍵字（料號或描述）","required":true,"schema":{"type":"string"},"example":"BRACKET"},{"name":"limit","in":"query","description":"最大回傳筆數","required":false,"schema":{"type":"integer","format":"int32","default":100},"example":100}],"responses":{"200":{"description":"成功取得搜尋結果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PartResponse"}}}},"400":{"description":"請求參數無效","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"伺服器錯誤","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/agile/options/form-types":{"get":{"tags":["Agile PLM 控制器"],"summary":"取得表單類型選項","description":"取得所有已使用的表單類型 (Form Types)","operationId":"getFormTypes","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/agile/options/business-units":{"get":{"tags":["Agile PLM 控制器"],"summary":"取得事業部選項","description":"取得所有已使用的事業部 (Business Units)","operationId":"getBusinessUnits","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/agile/changes":{"get":{"tags":["Agile PLM 控制器"],"summary":"查詢變更流程摘要","description":"查詢符合特定條件的變更單與流程資訊","operationId":"getChangeWorkflowSummaries","parameters":[{"name":"startDate","in":"query","description":"開始日期 (yyyy-MM-dd)","required":false,"schema":{"type":"string","format":"date-time"},"example":"2025-01-01"},{"name":"endDate","in":"query","description":"結束日期 (yyyy-MM-dd)","required":false,"schema":{"type":"string","format":"date-time"},"example":"2025-10-31"},{"name":"businessUnit","in":"query","description":"事業部","required":false,"schema":{"type":"string"},"example":2478590},{"name":"description","in":"query","description":"描述關鍵字","required":false,"schema":{"type":"string"},"example":"測試"},{"name":"formType","in":"query","description":"表單類型","required":false,"schema":{"type":"string"},"example":6062},{"name":"changeNumber","in":"query","description":"表單單號","required":false,"schema":{"type":"string"},"example":"ECR-250001"}],"responses":{"200":{"description":"成功取得資訊","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/agile/changes/{changeNumber}/signoffs":{"get":{"tags":["Agile PLM 控制器"],"summary":"取得簽核名單","description":"取得指定變更單(Change Number)的所有簽核人員與狀態","operationId":"getSignoffs","parameters":[{"name":"changeNumber","in":"path","description":"表單單號","required":true,"schema":{"type":"string"},"example":"ECR-250001"}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/agile/changes/export":{"get":{"tags":["Agile PLM 控制器"],"summary":"匯出變更單簽核明細","description":"匯出符合條件的變更單簽核明細 (Excel)","operationId":"exportChangeSignoffs","parameters":[{"name":"startDate","in":"query","description":"開始日期 (yyyy-MM-dd)","required":false,"schema":{"type":"string","format":"date-time"},"example":"2025-01-01"},{"name":"endDate","in":"query","description":"結束日期 (yyyy-MM-dd)","required":false,"schema":{"type":"string","format":"date-time"},"example":"2025-10-31"},{"name":"businessUnit","in":"query","description":"事業部","required":false,"schema":{"type":"string"},"example":2478590},{"name":"description","in":"query","description":"描述關鍵字","required":false,"schema":{"type":"string"},"example":"測試"},{"name":"formType","in":"query","description":"表單類型","required":false,"schema":{"type":"string"},"example":6062},{"name":"changeNumber","in":"query","description":"表單單號","required":false,"schema":{"type":"string"},"example":"ECR-250001"}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}}},"components":{"schemas":{"UpdatePartRequest":{"required":["description"],"type":"object","properties":{"description":{"type":"string","description":"零件描述","example":"Updated Bracket Assembly"}},"description":"更新資料"},"ApiErrorResponse":{"type":"object","properties":{"error":{"type":"string","description":"錯誤類型","example":"參數錯誤"},"message":{"type":"string","description":"錯誤訊息","example":"料號不能為空"}},"description":"API 錯誤回應"},"ExampleItem":{"required":["name"],"type":"object","properties":{"id":{"type":"string","description":"項目唯一識別碼","readOnly":true,"example":"item-1678888888888"},"name":{"type":"string","description":"項目名稱","example":"測試項目"},"description":{"type":"string","description":"項目描述","example":"這是一個範例項目的描述"}},"description":"範例項目模型"},"EmployeeHistoryRequest":{"type":"object","properties":{"bday":{"type":"string"}}},"EmployeeHistoryProjection":{"type":"object","properties":{"empName":{"type":"string"},"emhNcc":{"type":"string"},"empId":{"type":"string"},"emhDate":{"type":"string"},"emhTime":{"type":"string"},"emhOcc":{"type":"string"}}},"PartResponse":{"type":"object","properties":{"partNumber":{"type":"string","description":"零件料號","example":"P00001"},"description":{"type":"string","description":"零件描述","example":"Bracket Assembly"},"revision":{"type":"string","description":"版本","example":"A"},"lifecyclePhase":{"type":"string","description":"生命週期階段","example":"Production"}},"description":"零件資訊回應"}}}}